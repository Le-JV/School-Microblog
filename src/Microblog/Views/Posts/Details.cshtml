@model Microblog.Models.Post

@{
    ViewData["Title"] = "Details";
}

@inject UserManager<ApplicationUser> UserManager

<div>
    <h3>@Html.DisplayFor(model => model.Title)</h3>
    <p>By: @Html.DisplayFor(model => model.User.Email)</p>
    <p>Date: @Html.DisplayFor(model => model.PostDate)</p>
    <hr />
    <markdown content="@Model.Content" />
</div>
<div>
    <a asp-action="Edit" asp-route-id="@Model.ID">Edit</a> |
    <a asp-action="Index">Back</a>
</div>
<hr />
<div>
    <h3>@Html.DisplayNameFor(model => model.Comments)</h3>
    <p>Add a new comment</p>

    <form asp-action="/Comments/Create">
        <div>
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div class="form-group">
                <div>
                    <textarea asp-for="Content" class="form-control" rows="10" cols="40"></textarea>
                    <span asp-validation-for="Content" class="text-danger" />
                </div>
            </div>
            <div class="form-group">
                <div>
                    <input type="submit" value="Post" class="btn btn-default" />
                </div>
            </div>
        </div>
    </form>

    @foreach (var item in Model.Comments)
    {
        <p>By: @item.User.UserName</p>
        <p>Date: @item.PostDate</p>
        <markdown content="@item.Content" />
    }
</div>
